(()=>{class t{constructor(t,e,n){this.principal=t,this.years=e,this.rate=n}get monthlyPayment(){let t=this.rate/100/12;return this.principal*t/(1-Math.pow(1/(1+t),12*this.years))}get amortization(){let t=this.monthlyPayment,e=this.rate/100/12,n=this.principal,i=[];for(let a=0;a<this.years;a++){let a=0,l=0;for(let i=0;i<12;i++){let i=n*e,r=t-i;a+=i,l+=r,n-=r}i.push({principalY:l,interestY:a,balance:n})}return i}}document.getElementById("calcBtn").addEventListener("click",(()=>{let e=document.getElementById("principal").value,n=document.getElementById("years").value,i=document.getElementById("rate").value,a=new t(e,n,i);document.getElementById("monthlyPayment").innerHTML=a.monthlyPayment.toFixed(2),document.getElementById("monthlyRate").innerHTML=(i/12).toFixed(2);let l="";a.amortization.forEach(((t,e)=>l+=`\n        <tr>\n            <td>${e+1}</td>\n            <td class="currency">${Math.round(t.principalY)}</td>\n            <td class="stretch">\n                <div class="flex">\n                    <div class="bar principal"\n                         style="flex:${t.principalY};-webkit-flex:${t.principalY}">\n                    </div>\n                    <div class="bar interest"\n                         style="flex:${t.interestY};-webkit-flex:${t.interestY}">\n                    </div>\n                </div>\n            </td>\n            <td class="currency left">${Math.round(t.interestY)}</td>\n            <td class="currency">${Math.round(t.balance)}</td>\n        </tr>\n    `)),document.getElementById("amortization").innerHTML=l}))})();